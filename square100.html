<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>10x10 SayÄ± YerleÅŸtirme Oyunu</title>
  <style>
    :root {
      --size: 52px;
      --gap: 6px;
      --radius: 10px;
    }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: grid;
      place-items: center;
      min-height: 100vh;
      margin: 0;
      background: #0f172a; /* slate-900 */
      color: #e2e8f0;      /* slate-200 */
    }
    .wrap {
      width: min(95vw, 640px);
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
      gap: 10px;
      flex-wrap: wrap;
    }
    .title {
      font-weight: 700;
      font-size: 1.1rem;
    }
    .stats {
      display: flex;
      gap: 12px;
      font-size: .95rem;
      opacity: .9;
    }
    .btns {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    button {
      background: #1f2937;
      color: #e5e7eb;
      border: 1px solid #334155;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover { background:#111827; }
    button:disabled { opacity:.5; cursor:not-allowed; }
    #board {
      display: grid;
      grid-template-columns: repeat(10, var(--size));
      grid-auto-rows: var(--size);
      gap: var(--gap);
      background: #0b1220;
      padding: var(--gap);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px #1e293b;
      user-select: none;
    }
    .cell {
      display: grid;
      place-items: center;
      font-weight: 700;
      font-size: 1.05rem;
      border-radius: var(--radius);
      border: 1px solid #1f2937;
      background: linear-gradient(180deg, #0b1220 0%, #0e1626 100%);
      transition: transform .08s ease, box-shadow .08s ease, background .15s ease, border-color .15s ease;
      cursor: default;
    }
    .cell:hover { transform: translateY(-1px); }
    .cell.filled {
      background: #0e151f;
      border-color: #263246;
      color: #c7d2fe; /* indigo-200 */
      box-shadow: inset 0 0 0 1px #263246;
    }
    .cell.clickable {
      cursor: pointer;
      background: linear-gradient(180deg, #0d1b2a 0%, #0f2133 100%);
      border-color: #324055;
      box-shadow: 0 0 0 2px rgba(99,102,241,.25); /* indigo glow */
    }
    .cell.clickable:hover {
      box-shadow: 0 0 0 3px rgba(99,102,241,.45);
      transform: translateY(-2px) scale(1.01);
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border: 1px solid #334155;
      border-radius: 999px;
      background: #0b1220;
      font-weight: 600;
    }
    .msg {
      margin-top: 12px;
      min-height: 24px;
      font-size: .95rem;
      opacity: .9;
    }
    .legend {
      margin-top: 10px;
      font-size: .9rem;
      color:#cbd5e1;
      opacity:.85;
    }
    .legend code {
      padding: 2px 6px;
      background:#0b1220;
      border:1px solid #334155;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">10Ã—10 SayÄ± YerleÅŸtirme</div>
      <div class="stats">
        <div class="badge">SÄ±radaki: <span id="nextNum">1</span></div>
        <div class="badge">Hamle: <span id="moveCount">0</span></div>
        <div class="badge">Uygun Kare: <span id="movesLeft">100</span></div>
      </div>
      <div class="btns">
        <button id="undoBtn" disabled>Geri Al</button>
        <button id="resetBtn">Yeni Oyun</button>
      </div>
    </header>

    <div id="board" aria-label="10x10 oyun tahtasÄ±"></div>
    <div class="msg" id="msg"></div>
    <div class="legend">
      Kurallar: Ä°lk hamlede istediÄŸin yer. SonrasÄ±nda sadece <code>Â±3,0</code>, <code>0,Â±3</code> ve <code>Â±2,Â±2</code> uzaklÄ±ktaki boÅŸ karelere gidebilirsin. 
    </div>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const nextNumEl = document.getElementById('nextNum');
    const moveCountEl = document.getElementById('moveCount');
    const movesLeftEl = document.getElementById('movesLeft');
    const msgEl = document.getElementById('msg');
    const undoBtn = document.getElementById('undoBtn');
    const resetBtn = document.getElementById('resetBtn');

    const SIZE = 10;
    const OFFSETS = [
	  [ 3,  0], [-3,  0], [ 0,  3], [ 0, -3],  // dikey/yatay 3 kare
	  [ 2,  2], [ 2, -2], [-2,  2], [-2, -2]  // Ã§apraz Â±2,Â±2
	];


    let board, current, lastPos, history;

    function init() {
      board = Array.from({ length: SIZE }, () => Array(SIZE).fill(null));
      current = 1;
      lastPos = null;
      history = [];
      renderBoard();
      updateUI();
      setMessage('BaÅŸlamak iÃ§in herhangi bir kareye tÄ±kla.');
    }

    function inBounds(r, c) {
      return r >= 0 && r < SIZE && c >= 0 && c < SIZE;
    }

    function getValidMoves() {
      const moves = [];
      if (current === 1) {
        // Ä°lk hamlede tÃ¼m boÅŸ kareler
        for (let r = 0; r < SIZE; r++) {
          for (let c = 0; c < SIZE; c++) {
            if (board[r][c] === null) moves.push([r, c]);
          }
        }
        return moves;
      }
      const [r0, c0] = lastPos;
      for (const [dr, dc] of OFFSETS) {
        const r = r0 + dr, c = c0 + dc;
        if (inBounds(r, c) && board[r][c] === null) moves.push([r, c]);
      }
      return moves;
    }

    function placeNumber(r, c) {
      if (board[r][c] !== null) return;
      // Hamle geÃ§erliyse yerleÅŸtir
      if (current === 1 || getValidMoves().some(([rr, cc]) => rr === r && cc === c)) {
        board[r][c] = current;
        history.push({ r, c }); // undo iÃ§in
        lastPos = [r, c];
        current++;
        renderBoard();
        updateUI();

        if (current === 102) {
          // gÃ¼venlik; normalde 101 olmaz ama taÅŸ taÅŸÄ±nca sorun Ã§Ä±kmasÄ±n
          current = 101;
        }

        // Kazanma veya kilitlenme kontrolÃ¼
        if (current > 100) {
          setMessage('ðŸŽ‰ Tebrikler! 100 sayÄ±yÄ± da yerleÅŸtirdin.');
          endIfNoMoves(true);
        } else {
          endIfNoMoves();
        }
      }
    }

    function endIfNoMoves(force = false) {
      const moves = getValidMoves();
      movesLeftEl.textContent = moves.length;
      // Oyun bitiÅŸi: hamle kalmadÄ±ysa
      if (force || (current > 1 && moves.length === 0)) {
        if (current <= 100) {
          setMessage(`ðŸ›‘ Oyun bitti. YerleÅŸtirilen son sayÄ±: ${current - 1}.`);
        }
        // TÄ±klanabilirliÄŸi kapatma: clickable sÄ±nÄ±fÄ±nÄ± kaldÄ±rÄ±yoruz
        renderBoard(true);
      }
    }

    function undo() {
      if (!history.length) return;
      const last = history.pop();
      board[last.r][last.c] = null;
      current--;
      lastPos = history.length ? [history[history.length - 1].r, history[history.length - 1].c] : null;
      renderBoard();
      updateUI();
      setMessage('Hamle geri alÄ±ndÄ±.');
    }

    function updateUI() {
      nextNumEl.textContent = current > 100 ? 'â€”' : current;
      moveCountEl.textContent = Math.max(0, current - 1);
      const moves = getValidMoves();
      movesLeftEl.textContent = moves.length;
      undoBtn.disabled = history.length === 0;
    }

    function setMessage(text) {
      msgEl.textContent = text;
    }

    function renderBoard(lockAll = false) {
      // TÃ¼m hÃ¼creleri (yeniden) Ã§iz
      if (!boardEl.childElementCount) {
        // ilk kurulum
        for (let r = 0; r < SIZE; r++) {
          for (let c = 0; c < SIZE; c++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.dataset.r = r;
            cell.dataset.c = c;
            boardEl.appendChild(cell);
          }
        }
      }
      // iÃ§erik ve tÄ±klanabilirlik
      const validSet = new Set(getValidMoves().map(([r, c]) => `${r},${c}`));
      for (const cell of boardEl.children) {
        const r = +cell.dataset.r, c = +cell.dataset.c;
        const val = board[r][c];
        cell.textContent = val === null ? '' : val;
        cell.classList.toggle('filled', val !== null);

        const clickable = !lockAll && (
          (current === 1 && val === null) ||
          (val === null && validSet.has(`${r},${c}`))
        );
        cell.classList.toggle('clickable', clickable);
      }
    }

    // Etkinlikler
    boardEl.addEventListener('click', (e) => {
      const cell = e.target.closest('.cell');
      if (!cell) return;
      if (!cell.classList.contains('clickable')) return;
      const r = +cell.dataset.r, c = +cell.dataset.c;
      placeNumber(r, c);
    });

    undoBtn.addEventListener('click', undo);
    resetBtn.addEventListener('click', init);

    // BaÅŸlat
    init();
  </script>
</body>
</html>
